webpackJsonp([1],{"0/n6":function(e,t){},"4ml/":function(e,t){},EE0f:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=n("VU/8")({name:"App"},o,!1,function(e){n("mZUa")},null,null).exports,r=n("/ocq"),s="http://cmsdev.app-link.org/alucard263096/dkkh5/api/",l="https://alioss.app-link.org/alucard263096/dkkh5/",c="http://cmsdev.app-link.org/alucard263096/dkkh5/fileupload",u=n("Zrlr"),d=n.n(u),m=n("wxAW"),g=n.n(m),f=n("mtWM"),p=n.n(f),h=function(){function e(){d()(this,e)}return g()(e,null,[{key:"Post",value:function(t,n){var i=s+t,o=window.localStorage.getItem("token");return p.a.post(i,e.ParamUrlencoded(n),{headers:{"Content-Type":"application/x-www-form-urlencoded",Sign:e.Sign,Token:o,TokenKey:e.TokenKey,UNICODE:e.Unicode}}).then(function(e){return console.log(t,n,e.data),e.data})}},{key:"UploadBase64",value:function(t,n){var i={module:t,base64:n,rettype:"json"},o=c,a=window.localStorage.getItem("token");return p.a.post(o,e.ParamUrlencoded(i),{headers:{"Content-Type":"application/x-www-form-urlencoded",Sign:e.Sign,Token:a,TokenKey:e.TokenKey,UNICODE:e.Unicode}}).then(function(e){return console.log("UploadBase64",e),e.data})}},{key:"ParamUrlencoded",value:function(e){var t=new Array;for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}}]),e}();h.Sign="",h.Token="",h.TokenKey="",h.Unicode="dkkh5";var v=n("SHZo"),w=function(){function e(){d()(this,e)}return g()(e,null,[{key:"getUrlKey",value:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null}},{key:"getCodeApi",value:function(e){var t="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+encodeURIComponent(window.location.href)+"&response_type=code&scope=snsapi_base&state=123#wechat_redirect";window.location.href=t}},{key:"Init",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;console.log(t),t.api=s,t.uploadpath=l,t.fileupload=c,null==e.Res?h.Post("inst/resources",{}).then(function(i){t.Res=i,e.Res=i,void 0!=n&&n(e.Res)}):(t.Res=e.Res,void 0!=n&&n(e.Res)),null==e.Inst?h.Post("inst/info",{}).then(function(n){n.chenggong=n.chenggong.replace(/(\r\n|\n|\r)/gm,"<br />"),t.Inst=n,e.Inst=n,e.loadwechat(t)}):(t.Inst=e.Inst,e.loadwechat(t)),console.log("pageinfo",t),t.home=function(e){t.$router.push({path:"/"})},t.routeto=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.$router.push({path:e,param:n})},t.contactkefu=function(){window.open(t.uploadpath+"inst/"+t.Inst.qrcode)},t.goBack=function(){t.$router.back(-1)},t.showloginbox=function(t){e.AppInstance.ShowLoginBox()},t.copy=function(e){var t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("Copy"),document.body.removeChild(t),this.$message({message:"复制成功",type:"success"})},t.getFlowSize=function(e){return e<1024?parseInt(e).toString()+"KB":(e/=1024)<1024?parseInt(e).toString()+"MB":(e/=1024,parseInt(e).toString()+"GB")},null!=window.localStorage.getItem("token")?null==e.Member?h.Post("member/info",{}).then(function(n){t.Member=n,e.Member=n}):(t.Member=e.Member,h.Post("member/info",{}).then(function(n){t.Member=n,e.Member=n})):(t.Member=null,e.Member=null)}},{key:"ReloadMember",value:function(t,n){null!=window.localStorage.getItem("token")?h.Post("member/info",{}).then(function(i){t.Member=i,e.Member=i,n(i)}):(t.Member=null,e.Member=null,n(null))}},{key:"LoginAuth",value:function(e){null!=window.localStorage.getItem("token")?h.Post("member/info",{}).then(function(t){null==t&&e.home()}):e.home()}},{key:"CheckLoginCallback",value:function(e){null!=window.localStorage.getItem("token")?h.Post("member/info",{}).then(function(t){e(t)}):e(null)}},{key:"loadwechatconfig",value:function(t){h.Post("wechat/gensign",{url:location.href.split("#")[0]}).then(function(t){var n={debug:!1,appId:e.Inst.appid,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["scanQRCode","onMenuShareTimeline","onMenuShareAppMessage"]};console.log("wxconfig",t,n),v.a.config(n),v.a.ready(function(){v.a.onMenuShareAppMessage({title:localStorage.getItem("title"),desc:localStorage.getItem("miaoshu"),link:"",imgUrl:"https://alioss.app-link.org/alucard263096/dkkh5/xianmu/"+localStorage.getItem("fenxian"),type:"",dataUrl:"",success:function(){console.log("分享给朋友成功")},cancel:function(){console.log("分享给朋友失败")},fail:function(e){console.log(e,"分享给朋友成功11")}}),v.a.onMenuShareTimeline({title:localStorage.getItem("title"),link:"",imgUrl:"https://alioss.app-link.org/alucard263096/dkkh5/xianmu/"+localStorage.getItem("fenxian"),success:function(){console.log("分享成功")},cancel:function(){console.log("取消分享")}})})})}},{key:"loadwechat",value:function(t){if("micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)){t.inwechat=!0;var n=e.getUrlKey("code");n?h.Post("member/getwechatinfo",{code:n}).then(function(n){void 0==n.errcode&&(localStorage.setItem("openid",n.openid),e.loadwechatconfig(t))}):(console.log(e.Inst),e.getCodeApi(e.Inst.appid))}}}]),e}();w.title="2222",w.InWechat=!1,w.AppInstance=null,w.Res=null,w.Inst=null,w.Member=null;!function(){function e(){d()(this,e)}g()(e,null,[{key:"ContentToHtml",value:function(e){if(null==e)return"";var t=new RegExp("\n","g");return e=e.replace(t,"<br />")}},{key:"HtmlDecode",value:function(e){if(null==e)return"";var t="";if(0==e.length)return"";t=(t=(t=(t=(t=(t=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&nbsp;/g," ")).replace(/&#39;/g,"'")).replace(/&quot;/g,'"');var n=new RegExp('"/alucard263096/kalianmifi/upload/',"g");return t=t.replace(n,'"http://cmsdev.app-link.org/alucard263096/kalianmifi/upload/')}},{key:"IsMobile",value:function(e){return 11==Number(e).toString().length&&"1"==e[0]}},{key:"UUID",value:function(){for(var e=[],t=0;t<32;t++)e[t]="0123456789ABCDEF".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789ABCDEF".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23],e.join("")}},{key:"GetIDString",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].id);return t.join(",")}}])}();var y={data:function(){return{Res:{},Inst:{},Member:null,tongyi:!0,xianmulist:[],Pid:null,title:""}},mounted:function(){},created:function(){var e=this;w.Init(this),this.Pid=this.$route.query.id,console.log(this.Pid,"Pid4"),h.Post("xianmu/xianmulist",{id:this.Pid}).then(function(t){localStorage.setItem("title",t.name),localStorage.setItem("fenxian",t.fenxian),localStorage.setItem("miaoshu",t.miaoshu),w.loadwechatconfig(e),e.xianmulist=t,e.title=t.name})},methods:{tiaozhuan:function(){this.routeto("/information?id="+this.Pid)}}},x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:this.title,expression:"this.title"}],staticStyle:{"min-height":"100vh"}},[n("img",{staticClass:"sucess",staticStyle:{width:"100%"},attrs:{alt:"",src:e.uploadpath+"xianmu/"+e.xianmulist.img}}),e._v(" "),n("div",{staticClass:"h-140"}),e._v(" "),0!=e.xianmulist.length?n("div",{staticClass:"posifix"},[n("div",{staticClass:"padding-bottom-3x"}),e._v(" "),n("div",{staticClass:"margin-left-10x margin-right-10x f-38 bg-g4 f-g3 h-68 text-center border-34 ",on:{click:e.tiaozhuan}},[e._v("\r\n立即购买\r\n  ")]),e._v(" "),n("div",{staticClass:"padding-bottom-3x"})]):e._e()])},staticRenderFns:[]};var _=n("VU/8")(y,x,!1,function(e){n("yo9Y")},"data-v-3797d41d",null).exports,b=n("mvHQ"),k=n.n(b),C=n("BO1k"),I=n.n(C),S=n("Fd2+"),M={data:function(){return{Res:{},Inst:{},Member:null,daan:[],daanid:null,yijiname:[],placexs:!1,disabled:null,namelist:[],frontPic:"",imgindex:null,order_id:null,daanindex:null,neironglist:[]}},mounted:function(){v.a.hideOptionMenu()},created:function(){var e=this;w.Init(this),document.title=localStorage.getItem("title"),h.Post("neirong/neironglist",{xianmu_id:this.$route.query.id}).then(function(t){var n=!0,i=!1,o=void 0;try{for(var a,r=I()(t);!(n=(a=r.next()).done);n=!0){var s=a.value;s.answer="",s.img=""}}catch(e){i=!0,o=e}finally{try{!n&&r.return&&r.return()}finally{if(i)throw o}}e.neironglist=t,console.log(t,"neironglist")})},methods:{onCancel:function(){this.placexs=!1},onConfirm:function(e,t,n){var i=this.neironglist;i[this.daanindex].answer=e,this.neironglist=i,this.placexs=!1},dianji:function(e){this.imgindex=e,console.log(e,"neirongliswwwt")},afterRead2:function(e){var t=this,n=this;h.UploadBase64("tianxie",e.content).then(function(e){var i=n.imgindex,o=t.neironglist;o[i].img=e.result,t.neironglist=o,console.log(e.result,"result",o,i)})},getList:function(e){},chuan:function(e,t){this.daanid=e.id;var n=t;this.daanindex=n;var i=[],o=!0,a=!1,r=void 0;try{for(var s,l=I()(e.stylist);!(o=(s=l.next()).done);o=!0){var c=s.value.name;i.push(c)}}catch(e){a=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw r}}this.namelist=i,"C"==e.style&&(this.placexs=!0),console.log(e,"daanid")},zhifu:function(){var e=this;console.log("loadwechat"),w.loadwechat(this);window.navigator.userAgent.toLowerCase();var t=[],n=this.neironglist,i=0,o=!0,a=!1,r=void 0;try{for(var s,l=I()(n);!(o=(s=l.next()).done);o=!0){var c=s.value;if(""==c.answer&&"B"!=c.style&&"Y"==c.isbitian_value)return void S.a.fail(c.tips);if("B"==c.style&&""==c.img&&"Y"==c.isbitian_value)return void S.a.fail("请上传照片");if("C"==c.style){var u=!0,d=!1,m=void 0;try{for(var g,f=I()(c.stylist);!(u=(g=f.next()).done);u=!0){var p=g.value;c.answer==p.name&&(i=1*i+1*p.price)}}catch(e){d=!0,m=e}finally{try{!u&&f.return&&f.return()}finally{if(d)throw m}}}var v={neironid:c.id,neirondaan:c.answer,img:c.img};t.push(v)}}catch(e){a=!0,r=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw r}}var y=k()(t);console.log(y,"jieguo");this.$route.query.id;h.Post("neirong/daan",{str:y,xianmu_id:this.$route.query.id,xjiage:i}).then(function(t){if(0==t.code){if(e.order_id=t.result,"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)){console.log("micromessenger");var n=window.localStorage.getItem("openid");return void h.Post("wechat/prepay",{order_id:t.result,openid:n}).then(function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",t,function(t){"get_brand_wcpay_request:ok"==t.err_msg&&e.routeto("/purchasesucess?id=id")})})}h.Post("wechat/prepay1",{order_id:t.result}).then(function(e){alert(e.return),console.log(e.return,"return"),window.open(e.return)})}})},checkpay:function(){var e=this;h.Post("order/info",{id:this.order_id}).then(function(t){"B"==t.zhifu?e.routeto("/purchasesucess?id=id"):setTimeout(function(){e.checkpay()},1e3)})}}},P={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"margin-top h1 bold text-center f-g5"},[e._v("填写信息")]),e._v(" "),n("div",{staticClass:"margin-top-4x"}),e._v(" "),e._l(e.neironglist,function(t,i){return n("div",{key:i,staticClass:"margin-left-3x margin-right-3x margin-top margin-bottom-4x"},[n("div",{staticClass:"flex-row"},[n("div",{staticClass:"h2 margin-top-05"},[e._v(e._s(i+1)+".")]),e._v(" "),n("div",{staticClass:"padding-left flex-1"},[n("div",{staticClass:"h2"},[e._v(e._s(t.name))]),e._v(" "),""!=t.buchong?n("div",{staticClass:"f-g4 padding-bottom padding-top"},[e._v("\n            "+e._s(t.buchong)+"\n          ")]):e._e(),e._v(" "),"B"==t.style?n("div",{staticClass:"f-g4 padding-bottom"},[e._v("\n            "+e._s(t.tips)+"\n          ")]):e._e(),e._v(" "),"A"==t.style?n("input",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"item.answer"}],staticClass:"bd-bottom h2 margin-top",attrs:{type:"text",placeholder:t.tips},domProps:{value:t.answer},on:{click:function(n){return e.chuan(t,i)},input:function(n){n.target.composing||e.$set(t,"answer",n.target.value)}}}):e._e(),e._v(" "),"C"==t.style?n("input",{directives:[{name:"model",rawName:"v-model",value:t.answer,expression:"item.answer"}],staticClass:"bd-bottom h2 margin-top h-46",attrs:{type:"text",placeholder:t.tips,readonly:"readonly"},domProps:{value:t.answer},on:{click:function(n){return e.chuan(t,i)},input:function(n){n.target.composing||e.$set(t,"answer",n.target.value)}}}):e._e(),e._v(" "),"C"==t.style?n("div",{directives:[{name:"show",rawName:"v-show",value:e.placexs,expression:"placexs"}],staticClass:"xz flex-row flex-column"},[n("div",{staticClass:"flex-1 zz"}),e._v(" "),n("van-picker",{attrs:{"show-toolbar":"",columns:e.namelist},on:{cancel:e.onCancel,confirm:e.onConfirm}})],1):e._e(),e._v(" "),"B"==t.style?n("div",{staticClass:"margin-top margin-left-4x",on:{click:function(t){return e.dianji(i)}}},[n("van-uploader",{attrs:{"after-read":e.afterRead2}},[""==t.img?n("img",{staticClass:"add",attrs:{alt:"",src:e.uploadpath+"resource/"+e.Res.add}}):n("img",{staticClass:"add",attrs:{alt:"",src:e.uploadpath+"tianxie/"+t.img}})])],1):e._e()])]),e._v(" "),"B"==t.style?n("div",{}):e._e()])}),e._v(" "),n("div",{staticClass:"padding-top"}),e._v(" "),0!=e.neironglist.length?n("div",{staticClass:"margin-left-10x margin-right-10x f-38 bg-g4 f-g3 h-68 text-center border-34",on:{click:e.zhifu}},[e._v("\n      立即支付\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"padding-top"})],2)},staticRenderFns:[]};var R=n("VU/8")(M,P,!1,function(e){n("0/n6")},"data-v-51556213",null).exports,U={data:function(){return{Res:{},Inst:{},Member:null}},mounted:function(){v.a.hideOptionMenu()},created:function(){w.Init(this),document.title=localStorage.getItem("title")},methods:{}},B={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"background-size":"100% 100%","min-height":"100vh"},style:{"background-image":"url("+e.uploadpath+"resource/"+e.Res.bg+")"}},[n("div",{staticClass:"flex-row flex-center ",staticStyle:{"min-height":"100vh"}},[n("div",{staticStyle:{width:"100vw"}},[n("img",{staticClass:"sucess",attrs:{alt:"",src:e.uploadpath+"resource/"+e.Res.ti1}}),e._v(" "),n("div",{staticClass:"f-56 text-center  bold margin-top-4x margin-bottom-4x"},[e._v("购买成功")]),e._v(" "),n("div",{staticClass:"margin-top"}),e._v(" "),n("div",{staticClass:"f-38 text-center  f-g2  ",domProps:{innerHTML:e._s(e.Inst.chenggong)}}),e._v(" "),n("div",{staticClass:"padding-top-100"}),e._v(" "),n("div",{staticClass:"padding-top-100"})])])])},staticRenderFns:[]};var A=n("VU/8")(U,B,!1,function(e){n("cGB7")},"data-v-7edbfa82",null).exports,E={data:function(){return{Res:{},Inst:{},Member:null,fileList:[]}},created:function(){w.Init(this),w.LoginAuth(this)},methods:{afters:function(e){var t=this;console.log("file",e);var n=e.file.name;h.UploadBase64("baoming",e.content).then(function(e){t.frontPic.push({img:e.result,name:n}),console.log(frontPic)})},shanchu:function(e){console.log("file",e);for(var t=e.file.name,n=0;n<this.frontPic.length;n++)t==this.frontPic[n].name&&this.frontPic.splice(n,1);console.log(this.frontPic)}}},T={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-uploader",{attrs:{multiple:"","after-read":e.afters},on:{delete:e.shanchu},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1)},staticRenderFns:[]};var $=n("VU/8")(E,T,!1,function(e){n("EE0f")},"data-v-e83a5478",null).exports;i.a.use(r.a);var L=new r.a({routes:[{path:"/",name:"Home",component:_},{path:"/information",name:"information",component:R,meta:{title:"H5购买"}},{path:"/purchasesucess",name:"purchasesucess",component:A},{path:"/ceshi",name:"ceshi",component:$}]}),q=(n("sVYa"),n("4ml/"),n("YqKu")),j=n.n(q);i.a.use(j.a),L.beforeEach(function(e,t,n){e.meta.title&&(document.title=e.meta.title),n()}),i.a.use(S.b),i.a.prototype.wx=v.a,i.a.config.productionTip=!1,new i.a({el:"#app",router:L,components:{App:a},template:"<App/>"})},cGB7:function(e,t){},mZUa:function(e,t){},yo9Y:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.d31a7b8f4a6211e4e674.js.map